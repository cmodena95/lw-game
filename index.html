<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body onkeydown="getKeyAndMove(event)">
    <img src="images/background.jpg" class="background">
    <img src="images/wagon.png" class="wagon">
    <img src="images/sagradafamilia.png" class="sagrada-familia">
    <img src="images/top-tree.png" class="top-tree">
    <img src="images/torre.png" class="torre">
    <img src="images/arc.png" class="arc">
    <img src="images/mid-trees.png" class="mid-trees">
    <img src="images/bottom-tree.png" class="bottom-tree">
  </body>
</html>

<script>

 function drive() {

 }

 function road1() {

 }


 function moveLeft(e) {
    console.log(e);
    if (e.keyCode == 37) {
      const style = getComputedStyle(wagon);
      let positionLeft = style.left;
      let positionTop = style.top;
      if (positionLeft == '0px') {
        console.log('stop');
      } else {
        wagon.style.left = parseInt(wagon.style.left) - 10 + "px";
      }
    }
  }
  function moveUp() {
    let style = getComputedStyle(wagon);
    let positionTop = style.top;
    if (positionTop == '160px') {
      console.log('stop');
    } else {
      wagon.style.top = parseInt(wagon.style.top) - 10 + "px";
    }
  }
  function moveRight() {
    wagon.style.left = parseInt(wagon.style.left) + 10 + "px";
    const style = getComputedStyle(wagon);
    let positionLeft = style.left;
    let positionTop = style.top;
    if (positionLeft == '670px') {
      document.addEventListener('keydown', diagonal);
    }
  }

  function moveDown() {
    let style = getComputedStyle(wagon);
    let positionTop = style.top;
    if (positionTop == '250px') {
      console.log('stop');
    } else {
      wagon.style.top = parseInt(wagon.style.top) + 10 + "px";
    }
  }



  var wagon = null;
  function init() {
      wagon = document.querySelector(".wagon");
      wagon.style.position = "absolute";
      wagon.style.left = "0px";
      wagon.style.top = "200px";
    }

  let step = 0;
  let stepy = 0;
  let stepx = 0;

  function flip(e) {
    let style = getComputedStyle(wagon);
    let positionLeft = style.left;
    wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
    console.log(positionLeft);
    // wagon.style.left = parseInt(wagon.style.left) - 5 + "px";
    // if (positionLeft == '830px') {
      document.addEventListener('keydown', moveLeft);
    // }
  }

  function diagonal(e) {
    let style = getComputedStyle(wagon);
    let positionLeft = style.left;
    let positionTop = style.top;
    console.log(`left: ${positionLeft}`);
    console.log(`top: ${positionTop}`);
    stepx = stepx + 1;
    stepy = stepy + 10;
    wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
    
    if (positionLeft == '820px') {
      document.addEventListener('keydown', flip);
    }
  }

  function getKeyAndMove(e) {
    e.view.event.preventDefault();
    var key_code = e.which || e.keyCode;
    switch (key_code) {
      case 37: //left arrow key
        moveLeft();
        break;
      case 38: //Up arrow key
        moveUp();
        break;
      case 39: //right arrow key
        moveRight();
        break;
      case 40: //down arrow key
        moveDown();
        break;
    }
  }

    // wagon = document.querySelector('.wagon');
    //   const style = getComputedStyle(wagon);
    //   let positionLeft = style.left;
    //   let positionTop = style.top;

  function moveLeft(e) {
    console.log(e);
    if (e.keyCode == 37) {
      const style = getComputedStyle(wagon);
      let positionLeft = style.left;
      let positionTop = style.top;
      if (positionLeft == '0px') {
        console.log('stop');
      } else {
        wagon.style.left = parseInt(wagon.style.left) - 10 + "px";
      }
    }
  }
  function moveUp() {
    let style = getComputedStyle(wagon);
    let positionTop = style.top;
    if (positionTop == '160px') {
      console.log('stop');
    } else {
      wagon.style.top = parseInt(wagon.style.top) - 10 + "px";
    }
  }
  function moveRight() {
    wagon.style.left = parseInt(wagon.style.left) + 10 + "px";
    const style = getComputedStyle(wagon);
    let positionLeft = style.left;
    let positionTop = style.top;
    if (positionLeft == '670px') {
      document.addEventListener('keydown', diagonal);
    }
  }

  function moveDown() {
    let style = getComputedStyle(wagon);
    let positionTop = style.top;
    if (positionTop == '250px') {
      console.log('stop');
    } else {
      wagon.style.top = parseInt(wagon.style.top) + 10 + "px";
    }
  }
  window.onload = init;
</script>



<!-- road 1: -->
<!-- if left is less than 0, don't move -->
<!-- if top is higher than X or lower than Y, don't move -->
<!-- turning: if right is higher than X, flip and move diagonally -->
<!-- if top is lower than X, move left -->