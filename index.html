<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body onkeydown="drive(event)">
    <img src="images/background.jpg" class="background">
    <img src="images/wagon.png" class="wagon">
    <img src="images/sagradafamilia.png" class="sagrada-familia">
    <img src="images/top-tree.png" class="top-tree">
    <img src="images/torre.png" class="torre">
    <img src="images/arc.png" class="arc">
    <img src="images/mid-trees.png" class="mid-trees">
    <img src="images/bottom-tree.png" class="bottom-tree">
  </body>
</html>

<script>
  let wagon = document.querySelector('.wagon');
  const style = getComputedStyle(wagon);
  let positionLeft = style.left;
  let positionTop = style.top;

  function init() {
    wagon = document.querySelector(".wagon");
    wagon.style.position = "absolute";
    wagon.style.left = "0px";
    wagon.style.top = "200px";
  }

  let stepy = 0;
  let stepx = 0;


  function drive(e) {
    e.view.event.preventDefault();
    let positionLeft = getComputedStyle(wagon).left;
    let positionTop = getComputedStyle(wagon).top;
    let position = getComputedStyle(wagon).transform;

    if (e.keyCode == 40) {
      let position = getComputedStyle(wagon).transform;
      positionLeft = getComputedStyle(wagon).left;
      positionTop = getComputedStyle(wagon).top;

      if (wagon.getAttribute("id") == "right-9") {
        console.log('hello');
        stepx = stepx + 20;
        stepy = stepy + 5;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(-1, 0, 0, 1, 944, 998)') {
        wagon.removeAttribute("id");
        wagon.style.transform = 'translate(994px, 998px)';
        wagon.setAttribute("id", "right-9");
      } else if (positionLeft == '-780px' && positionTop == '1880px') {
        stepx = stepx - 8;
        stepy = stepy + 20;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (positionTop == '1880px') {
        wagon.style.transform = 'translate(1040px, 758px) scaleX(-1)';
        moveLeft(e);
      } else if (position == 'matrix(1, 0, 0, 1, 1040, 758)' || position == 'matrix(-1, 0, 0, 1, 1040, 758)') {
        wagon.style.transform = 'translate(1040px, 758px)'
        moveDown(e);
      } else if (wagon.getAttribute("id") == "right-7") {
        stepx = stepx + 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(1, 0, 0, 1, 280, 682)' && positionTop == '1600px') {
        wagon.setAttribute("id", "right-7");
      } else if (position == 'matrix(-1, 0, 0, 1, 280, 682)' && positionLeft == '-80px' || position == 'matrix(1, 0, 0, 1, 280, 682)') {
        wagon.style.transform = 'translate(280px, 682px)';
        moveDown(e);
      } else if (positionTop == '1220px' && positionLeft == '-80px') {
        stepx = stepx - 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(1, 0, 0, 1, 1000, 610)' || position == 'matrix(-1, 0, 0, 1, 1000, 610)') {
        wagon.style.transform = 'translate(1000px, 610px) scaleX(-1)';
        moveDown(e);
      } else if (positionTop == '1000px' && positionLeft == '-80px') {
        wagon.removeAttribute("id");
        stepx = stepx + 20;
        stepy = stepy + 3;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (wagon.getAttribute("id") == "down-4") {
        moveDown(e);
      } else if (positionLeft == '-80px' && positionTop == '700px') {
        wagon.style.transform = 'translate(220px, 493px)';
        wagon.removeAttribute("id");
        wagon.setAttribute("id", "down-4");
      } else if (wagon.getAttribute("id") == "left-4") {
        moveLeft(e);
      } else if (position == 'matrix(1, 0, 0, 1, 220, 493)' && positionLeft == '660px' && positionTop == '700px') {
        wagon.style.transform = 'translate(220px, 493px) scaleX(-1)';
        wagon.removeAttribute("id");
        wagon.setAttribute("id", "left-4");
      } else if (position == 'matrix(1, 0, 0, 1, 220, 493)') {
        moveDown(e);
      } else if (wagon.getAttribute("id") == "right-3") {
        // moveRight(e);
        stepx = stepx + 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(-1, 0, 0, 1, -560, 415)' && positionLeft == '660px' && positionTop == '420px') {
        wagon.style.transform = 'translate(-560px, 415px)'
        wagon.setAttribute("id", "right-3");
      } else if (positionTop == '380px' && positionLeft == '660px' && position == 'matrix(-1, 0, 0, 1, -550, 451)') {
        wagon.setAttribute("id", "right-3");
      } else if (position == 'matrix(-1, 0, 0, 1, -560, 415)') {
        wagon.removeAttribute("id");
        moveDown(e);
      } else if (wagon.getAttribute("id") == "left-2") {
        stepx = stepx - 20;
        stepy = stepy + 5;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
        let position = getComputedStyle(wagon).transform; 
      } else if (position == 'matrix(1, 0, 0, 1, 220, 220)') {
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
        wagon.setAttribute("id", "left-2");
      } else if (positionTop == '200px' && positionLeft == '660px') {
        stepx = stepx + 10;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
        let position = getComputedStyle(wagon).transform; 
      } else if (positionTop == '200px') {
        moveRight(e);
      }
    }
  }



  // wagon.style.transform = 'translate(190px, 190px) scaleX(-1)';

  function moveLeft(e) {
    wagon.style.left = parseInt(wagon.style.left) - 20 + "px";
  }

  function moveUp() {
    wagon.style.top = parseInt(wagon.style.top) - 20 + "px";
  }

  function moveRight() {
    wagon.style.left = parseInt(wagon.style.left) + 20 + "px";
  }

  function moveDown() {
    wagon.style.top = parseInt(wagon.style.top) + 20 + "px";
  }

  window.onload = init;
</script>

<!-- road 1: -->
<!-- if left is less than 0, don't move -->
<!-- if top is higher than X or lower than Y, don't move -->
<!-- turning: if right is higher than X, flip and move diagonally -->
<!-- if top is lower than X, move left -->