<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Neucha&family=Patrick+Hand&display=swap" rel="stylesheet">
  </head>
  <body onkeydown="drive(event)">
    <img src="images/background.jpg" class="background">
    <!-- <img src="images/wagon.png" class="wagon1"> -->
    <div class="wagon1">
      <img src="images/tyre2.png" class="tyre1">
      <img src="images/tyre2.png" class="tyre2">
    </div>
    <img src="images/sagradafamilia.png" class="sagrada-familia">
    <img src="images/top-tree.png" class="top-tree">

    <div class="fact-1-out">
      <div class="fact-1-in">
        <h2>Le Wagon Barcelona was launched in October 2016</h2>
      </div>
    </div>
    
    <img src="images/torre.png" class="torre">

    <div class="fact-2-out">
      <div class="fact-2-in">
        <h2>445 students have graduated to date</h2>
      </div>
    </div>

    <img src="images/arc.png" class="arc">

    <div class="fact-3-out">
      <div class="fact-3-in">
        <h2>Franchise bought in March 2021</h2>
      </div>
    </div>

    <img src="images/mid-trees.png" class="mid-trees">

    <div class="fact-4-out">
      <div class="fact-4-in">
        <h2>Franchise bought in March 2021</h2>
      </div>
    </div>

    <img src="images/bottom-tree.png" class="bottom-tree">

    <div class="fact-5-out">
      <div class="fact-5-in">
        <h2>Franchise bought in March 2021</h2>
      </div>
    </div>
  </body>
</html>

<script>
  // monuments
  const sagrada = document.querySelector('.sagrada-familia');
  const topTree = document.querySelector('.top-tree');
  const torre = document.querySelector('.torre');
  const arc = document.querySelector('.arc');
  const midTrees = document.querySelector('.mid-trees');
  const bottomTree = document.querySelector('.bottom-tree');

  // wagon
  let wagon = document.querySelector('.wagon1');
  const style = getComputedStyle(wagon);
  let positionLeft = style.left;
  let positionTop = style.top;

  let tyre1 = document.querySelector('.tyre1');
  let tyre2 = document.querySelector('.tyre2');

  let fact1 = document.querySelector('.fact-1-out');
  let fact2 = document.querySelector('.fact-2-out');
  let fact3 = document.querySelector('.fact-3-out');
  let fact4 = document.querySelector('.fact-4-out');
  let fact5 = document.querySelector('.fact-5-out');

  function init() {
    wagon = document.querySelector(".wagon1");
    wagon.style.position = "absolute";
    wagon.style.left = "0px";
    wagon.style.top = "200px";
  }

  let stepy = 0;
  let stepx = 0;
  let roll = 0;

  function drive(e) {
    e.view.event.preventDefault();
    let positionLeft = getComputedStyle(wagon).left;
    let positionTop = getComputedStyle(wagon).top;
    let position = getComputedStyle(wagon).transform;

    if (e.keyCode == 40) {
      roll = roll + 75;

      tyre1.style.transform = `translate(41px, 139px) scale(0.7) rotate(${roll}deg)`;
      tyre2.style.transform = `translate(90px, 136px) scale(0.7) rotate(${roll}deg)`;


      let position = getComputedStyle(wagon).transform;
      positionLeft = getComputedStyle(wagon).left;
      positionTop = getComputedStyle(wagon).top;

      if (position == 'matrix(1, 0, 0, 1, 1632, 2498)' && positionTop == '1880px' && positionLeft == '-1040px') {
        fact5.classList.add('backin-right');
      } else if (position == 'matrix(1, 0, 0, 1, 1664, 1858)' && positionTop == '1880px' && positionLeft == '-860px') {
        fact4.classList.add('lightspeed-in-right');
      } else if (position == 'matrix(1, 0, 0, 1, 1424, 1118)' && positionTop == '1880px' && positionLeft == '-780px') {
        fact3.classList.add('rollin');
      } else if (position == 'matrix(-1, 0, 0, 1, 1040, 758)' && positionLeft == '-280px' && positionTop == '1880px') {
        arc.classList.add('bounce-arc');
      } else if (position == 'matrix(-1, 0, 0, 1, 980, 612)' && positionTop == '1220px' && positionLeft == '-80px') {
        fact2.classList.add('zoomin-right');
      } else if (position == 'matrix(1, 0, 0, 1, 220, 493)' && positionLeft == '-80px' && positionTop == '920px') {
        torre.classList.add('bounce-torre');
      } else if (position == 'matrix(-1, 0, 0, 1, 220, 493)' && positionLeft == '360px' && positionTop == '700px') {
        wagon.style.zIndex = 3;
        fact1.classList.add('backin-right');
      } else if (position == 'matrix(1, 0, 0, 1, 180, 180)') {
        sagrada.classList.add('bounce-sagrada');
      }

      if (position == 'matrix(-1, 0, 0, 1, 1822, 2838)' && positionTop == '1880px' && positionLeft == '-1700px') {
        console.log('stop');
        tyre1.style.transform = `translate(41px, 139px) scale(0.7)`;
        tyre2.style.transform = `translate(90px, 136px) scale(0.7)`;
      } else if (wagon.getAttribute("id") == "left-14-diagonal") {
        stepx = stepx - 10;
        stepy = stepy + 20;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(-1, 0, 0, 1, 1872, 2738)' && positionLeft == '-1700px') {
        wagon.setAttribute("id", "left-14-diagonal");
      } else if (position == 'matrix(1, 0, 0, 1, 1872, 2738)' && positionTop == '1880px' || position == 'matrix(-1, 0, 0, 1, 1872, 2738)' && positionTop == '1880px') {
        wagon.removeAttribute("id");
        wagon.style.transform = 'translate(1872px, 2738px) scaleX(-1)';
        moveLeft(e);
      } else if (wagon.getAttribute("id") == "right-13-diagonal") {
        stepx = stepx + 10;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(1, 0, 0, 1, 1632, 2498)' && positionTop == '1880px' && positionLeft == '-800px') {
        wagon.setAttribute("id", "right-13-diagonal");
      } else if (position == 'matrix(-1, 0, 0, 1, 1632, 2498)' || position == 'matrix(1, 0, 0, 1, 1632, 2498)') {
        wagon.removeAttribute("id");
        wagon.style.zIndex = 7;
        wagon.style.transform = 'translate(1632px, 2498px)';
        moveRight(e);
      } else if (wagon.getAttribute("id") == "left-13-diagonal") {
        stepx = stepx - 5;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(-1, 0, 0, 1, 1772, 2218)' && positionTop == '1880px' && positionLeft == '-1480px') {
        wagon.setAttribute("id", "left-13-diagonal");
      } else if (position == 'matrix(1, 0, 0, 1, 1772, 2218)' || position == 'matrix(-1, 0, 0, 1, 1772, 2218)') {
        wagon.style.zIndex = 6;
        wagon.removeAttribute("id");
        wagon.style.transform = 'translate(1772px, 2218px) scaleX(-1)';
        moveLeft(e);
      } else if (wagon.getAttribute("id") == "right-12-diagonal") {
        stepx = stepx + 3;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (positionTop == '1880px' && positionLeft == '-720px' && position == 'matrix(1, 0, 0, 1, 1664, 1858)') {
        wagon.setAttribute("id", "right-12-diagonal");
      } else if (position == 'matrix(1, 0, 0, 1, 1664, 1858)') {
        wagon.removeAttribute("id");
        moveRight(e);
      } else if (wagon.getAttribute("id") == "right-11-diagonal") {
        stepx = stepx + 10;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(-1, 0, 0, 1, 1544, 1738)') {
        wagon.setAttribute("id", "right-11-diagonal");
      } else if (positionLeft == '-1380px' && positionTop == '1880px') {
        stepx = stepx - 10;
        stepy = stepy + 20;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(-1, 0, 0, 1, 1674, 1478)') {
        wagon.removeAttribute("id");
        moveLeft(e);
      } else if (wagon.getAttribute("id") == "left-10-diagonal") {
        stepx = stepx - 5;
        stepy = stepy + 20;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(1, 0, 0, 1, 1744, 1198)') {
        wagon.removeAttribute("id");
        wagon.setAttribute("id", "left-10-diagonal");
      } else if (wagon.getAttribute("id") == "right-9") {
        stepx = stepx + 20;
        stepy = stepy + 5;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(1, 0, 0, 1, 944, 998)') {
        wagon.removeAttribute("id");
        // wagon.style.transform = 'translate(994px, 998px)';
        wagon.setAttribute("id", "right-9");
        wagon.style.zIndex = 5;
      } else if (positionLeft == '-780px' && positionTop == '1880px') {
        stepx = stepx - 8;
        stepy = stepy + 20;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
        wagon.style.zIndex = 3;
      } else if (positionTop == '1880px') {
        wagon.style.transform = 'translate(1040px, 758px) scaleX(-1)';
        moveLeft(e);
      } else if (position == 'matrix(1, 0, 0, 1, 1040, 758)' || position == 'matrix(-1, 0, 0, 1, 1040, 758)') {
        wagon.style.transform = 'translate(1040px, 758px) scaleX(-1)'
        moveDown(e);
      } else if (wagon.getAttribute("id") == "right-7") {
        stepx = stepx + 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (position == 'matrix(1, 0, 0, 1, 280, 682)' && positionTop == '1600px') {
        wagon.setAttribute("id", "right-7");
      } else if (position == 'matrix(-1, 0, 0, 1, 280, 682)' && positionLeft == '-80px' || position == 'matrix(1, 0, 0, 1, 280, 682)') {
        wagon.style.transform = 'translate(280px, 682px)';
        moveDown(e);
      } else if (positionTop == '1220px' && positionLeft == '-80px') {
        wagon.style.zIndex = 4;
        stepx = stepx - 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
      } else if (position == 'matrix(1, 0, 0, 1, 1000, 610)' || position == 'matrix(-1, 0, 0, 1, 1000, 610)') {
        wagon.style.transform = 'translate(1000px, 610px) scaleX(-1)';
        moveDown(e);
      } else if (positionTop == '1000px' && positionLeft == '-80px') {
        wagon.removeAttribute("id");
        stepx = stepx + 20;
        stepy = stepy + 3;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
      } else if (wagon.getAttribute("id") == "down-4") {
        moveDown(e);
      } else if (positionLeft == '-80px' && positionTop == '700px') {
        wagon.style.transform = 'translate(220px, 493px)';
        wagon.removeAttribute("id");
        wagon.setAttribute("id", "down-4");
      } else if (wagon.getAttribute("id") == "left-4") {
        moveLeft(e);
      } else if (position == 'matrix(-1, 0, 0, 1, 220, 493)' && positionLeft == '660px' && positionTop == '700px') {
        // wagon.style.transform = 'translate(220px, 493px) scaleX(-1)';
        wagon.removeAttribute("id");
        wagon.setAttribute("id", "left-4");
      } else if (position == 'matrix(1, 0, 0, 1, 220, 493)' || position == 'matrix(-1, 0, 0, 1, 220, 493)') {
        wagon.style.transform = `translate(220px, 493px) scaleX(-1)`;
        moveDown(e);
      } else if (wagon.getAttribute("id") == "right-3") {
        // moveRight(e);
        stepx = stepx + 20;
        stepy = stepy + 2;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
        sagrada.style.zIndex = 0;
      } else if (position == 'matrix(-1, 0, 0, 1, -560, 415)' && positionLeft == '660px' && positionTop == '420px') {
        wagon.style.transform = 'translate(-560px, 415px)'
        wagon.setAttribute("id", "right-3");
      } else if (positionTop == '380px' && positionLeft == '660px' && position == 'matrix(1, 0, 0, 1, -560, 415)') {
        wagon.setAttribute("id", "right-3");
      } else if (position == 'matrix(-1, 0, 0, 1, -560, 415)' || position == 'matrix(1, 0, 0, 1, -560, 415)') {
        wagon.style.transform = `translate(-560px, 415px)`;
        wagon.removeAttribute("id");
        moveDown(e);
      } else if (wagon.getAttribute("id") == "left-2") {
        stepx = stepx - 20;
        stepy = stepy + 5;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
        let position = getComputedStyle(wagon).transform; 
      } else if (position == 'matrix(1, 0, 0, 1, 220, 220)') {
        wagon.style.transform = `translate(${stepx}px, ${stepy}px) scaleX(-1)`;
        wagon.setAttribute("id", "left-2");
      } else if (positionTop == '200px' && positionLeft == '660px') {
        stepx = stepx + 10;
        stepy = stepy + 10;
        wagon.style.transform = `translate(${stepx}px, ${stepy}px)`;
        let position = getComputedStyle(wagon).transform; 
      } else if (positionTop == '200px') {
        moveRight(e);
      }
    }
  }

  function moveLeft(e) {
    wagon.style.left = parseInt(wagon.style.left) - 20 + "px";
  }

  function moveUp() {
    wagon.style.top = parseInt(wagon.style.top) - 20 + "px";
  }

  function moveRight() {
    wagon.style.left = parseInt(wagon.style.left) + 20 + "px";
  }

  function moveDown() {
    wagon.style.top = parseInt(wagon.style.top) + 20 + "px";
  }


  window.onload = init;
</script>
